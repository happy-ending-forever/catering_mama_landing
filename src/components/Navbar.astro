---
import { Utensils, Menu, X } from "lucide-astro";

interface Props {
  whatsappLink: string;
}

const { whatsappLink } = Astro.props;

const navLinks = [
  { name: "Layanan", href: "#layanan" },
  { name: "Menu", href: "#menu" },
  { name: "Keunggulan", href: "#keunggulan" },
  { name: "Testimoni", href: "#testimoni" },
  { name: "Kontak", href: "#kontak" },
];
---

<nav id="navbar" class="fixed w-full z-50 transition-all duration-300 py-6">
  <div class="container mx-auto px-6 flex justify-between items-center">
    <a href="/" class="flex items-center gap-3">
      <div class="bg-yellow-400 p-2.5 rounded-xl">
        <Utensils class="w-7 h-7 text-white" />
      </div>
      <span class="text-2xl md:text-3xl font-bold tracking-tight font-outfit"
        >Catering<span class="text-yellow-500">Mama</span></span
      >
    </a>

    <!-- Desktop Nav -->
    <div class="hidden md:flex items-center gap-10">
      {
        navLinks.map((link) => (
          <a
            href={link.href}
            class="text-lg font-medium hover:text-yellow-500 transition-colors"
          >
            {link.name}
          </a>
        ))
      }
      <a
        href={whatsappLink}
        target="_blank"
        rel="noopener noreferrer"
        class="bg-yellow-400 hover:bg-yellow-500 text-white px-7 py-3 rounded-full font-semibold text-base transition-all shadow-md hover:shadow-lg active:scale-95"
      >
        Pesan Sekarang
      </a>
    </div>

    <!-- Mobile Toggle -->
    <button class="md:hidden" id="menu-toggle" aria-label="Toggle Menu">
      <Menu id="menu-icon-open" class="w-6 h-6" />
      <X id="menu-icon-close" class="w-6 h-6 hidden" />
    </button>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden absolute top-full left-0 w-full bg-white border-t p-6 shadow-xl flex flex-col gap-4"
  >
    {
      navLinks.map((link) => (
        <a href={link.href} class="text-lg font-medium mobile-link">
          {link.name}
        </a>
      ))
    }
    <a
      href={whatsappLink}
      class="bg-yellow-400 text-white text-center py-3 rounded-xl font-bold"
    >
      Pesan Sekarang
    </a>
  </div>
</nav>

<script>
  // Navbar Scroll Effect
  const navbar = document.getElementById("navbar");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      navbar?.classList.add("nav-scrolled");
    } else {
      navbar?.classList.remove("nav-scrolled");
    }
  });

  // Mobile Menu Toggle
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  const menuIconOpen = document.getElementById("menu-icon-open");
  const menuIconClose = document.getElementById("menu-icon-close");

  menuToggle?.addEventListener("click", () => {
    const isOpen = !mobileMenu?.classList.contains("hidden");
    if (isOpen) {
      mobileMenu?.classList.add("hidden");
      menuIconOpen?.classList.remove("hidden");
      menuIconClose?.classList.add("hidden");
    } else {
      mobileMenu?.classList.remove("hidden");
      menuIconOpen?.classList.add("hidden");
      menuIconClose?.classList.remove("hidden");
    }
  });

  // Close Mobile Menu on Link Click
  document.querySelectorAll(".mobile-link").forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden");
      menuIconOpen?.classList.remove("hidden");
      menuIconClose?.classList.add("hidden");
    });
  });
</script>
